import{d as T,w as V,a as z,r as f,j as e,B as x,x as n}from"./index--mJaizsc.js";import{u as B}from"./use-CR7JZOh1.js";import{S as A}from"./screen-wrapper-ka0X-mpj.js";import{S as H}from"./scroll-area-DBFoBbvv.js";import{C as g,b as U,c as E,a as L}from"./card-BfKKBDHD.js";import{u as k,C as M}from"./capital-change-chart-E-7GhRz2.js";import{S as O,a as R,b as W,c as $,d as u}from"./select-DUTwnW6M.js";import"./arrow-left-CNAqUfmD.js";import"./index-BdQq_4o_.js";import"./refresh-cw-wChuhh6Z.js";const se=()=>{var C,b,y;const{t}=T(),{id:r}=V(),d=z(),{accounts:h,accountsBalance:j,isLoading:o}=B(),[N,P]=f.useState([]),[v,F]=f.useState("7d"),{data:p,isLoading:_}=k(r,{period:v}),l=r?h==null?void 0:h[r]:null,m=r?j==null?void 0:j[r]:null,s=m==null?void 0:m.balance;if(console.log(m),f.useEffect(()=>{if(s&&!o){const a=Object.keys(s).filter(c=>{var i;return c!=="info"&&c!=="timestamp"&&c!=="datetime"&&c!=="free"&&c!=="used"&&c!=="total"&&c!=="debt"&&c!=="usd"&&((i=s[c])==null?void 0:i.total)>0}).slice(0,5);P(a)}},[s,o]),!o&&(!l||!r))return e.jsx(A,{headerProps:{title:t("account.account_detail")},children:e.jsx(H,{className:"flex-1 h-[calc(100vh-4rem)]",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 p-4",children:[e.jsx("p",{className:"text-lg mb-4",children:t("account.account_not_exist")}),e.jsx(x,{onClick:()=>d("/accounts"),children:t("account.back_to_account_list")})]})})});const S=(p==null?void 0:p.map(a=>({time:a.time||a.date||"",value:a.value||a.balance||0})))||[];return e.jsx(A,{headerProps:{title:t("account.account_detail")},className:"overflow-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-background",children:e.jsx("div",{className:"flex flex-col space-y-6 p-4 pb-20",children:o?e.jsx("div",{className:"flex justify-center items-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs(g,{children:[e.jsx(U,{children:e.jsxs(E,{className:"flex justify-between items-center",children:[e.jsx("span",{children:l==null?void 0:l.name}),e.jsx("span",{className:"text-lg font-normal text-muted-foreground capitalize",children:l==null?void 0:l.exchange})]})}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t("account.total")}),e.jsxs("p",{className:"text-2xl font-medium",children:[n(((C=s==null?void 0:s.usd)==null?void 0:C.total)||0)," USD"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t("account.available")}),e.jsxs("p",{className:"text-2xl font-medium",children:[n(((b=s==null?void 0:s.usd)==null?void 0:b.free)||0)," USD"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t("account.in_order")}),e.jsxs("p",{className:"text-lg font-medium",children:[n(((y=s==null?void 0:s.usd)==null?void 0:y.used)||0)," USD"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t("account.position_mode")}),e.jsx("p",{className:"text-lg font-medium capitalize",children:(l==null?void 0:l.positionMode)||"oneway"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:t("account.assets")}),N.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-4",children:N.map(a=>{var c,i,w,D;return e.jsxs(g,{className:"p-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:a}),e.jsxs("span",{children:[n(((c=s==null?void 0:s[a])==null?void 0:c.total)||0)," ",a]})]}),((i=s==null?void 0:s[a])==null?void 0:i.price)&&e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["â‰ˆ"," ",n((((w=s==null?void 0:s[a])==null?void 0:w.total)||0)*(((D=s==null?void 0:s[a])==null?void 0:D.price)||0))," ","USD"]})]},a)})}):e.jsx("p",{className:"text-muted-foreground",children:t("account.no_asset_info")})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(O,{value:v,onValueChange:a=>F(a),children:[e.jsx(R,{className:"w-[140px]",children:e.jsx(W,{placeholder:t("account.select_period")})}),e.jsxs($,{children:[e.jsx(u,{value:"7d",children:t("account.last_7_days")}),e.jsx(u,{value:"30d",children:t("account.last_30_days")}),e.jsx(u,{value:"90d",children:t("account.last_90_days")}),e.jsx(u,{value:"all",children:t("account.all_time")})]})]})}),e.jsxs(g,{children:[e.jsx(U,{children:e.jsx(E,{children:t("dashboard.capital_change_trend")})}),e.jsx(L,{children:_?e.jsx("div",{className:"flex justify-center items-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):S.length>0?e.jsx(M,{data:S,isLoading:_,isError:!1,height:250}):e.jsx("p",{className:"text-center text-muted-foreground py-6",children:t("dashboard.no_capital_change_data")})})]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(x,{variant:"outline",onClick:()=>d("/accounts"),children:t("account.back_to_account_list")}),e.jsx(x,{onClick:()=>d(`/account/edit/${r}`),children:t("account.edit_account")}),e.jsx(x,{onClick:()=>d("/search"),children:t("account.go_trading")})]})]})})})};export{se as default};
