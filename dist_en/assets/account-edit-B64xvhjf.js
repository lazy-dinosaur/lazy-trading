import{w as C,a as F,r as f,j as e,B as x,x as A,I as V,y as D,z as p}from"./index--mJaizsc.js";import{u as E}from"./use-CR7JZOh1.js";import{S as g}from"./screen-wrapper-ka0X-mpj.js";import{S as N}from"./scroll-area-DBFoBbvv.js";import{u as I,F as L,a as v,b as y}from"./form-CnYccCye.js";import{L as S}from"./label-DparRnXT.js";import{S as P,a as k,b as z,c as U,d as b}from"./select-DUTwnW6M.js";import{C as W,a as B}from"./card-BfKKBDHD.js";import"./arrow-left-CNAqUfmD.js";import"./index-BdQq_4o_.js";const Z=()=>{var h,j;const{id:r}=C(),c=F(),{accounts:n,accountsBalance:i,refreshAccounts:w,isLoading:t}=E(),[o,u]=f.useState(!1),l=I({defaultValues:{name:"",positionMode:"oneway"}}),s=r?n==null?void 0:n[r]:null,d=r?i==null?void 0:i[r]:null;if(f.useEffect(()=>{s&&!t&&l.reset({name:s.name,positionMode:s.positionMode||"oneway"})},[s,t,l]),!t&&(!s||!r))return e.jsx(g,{headerProps:{title:"계정 편집"},children:e.jsx(N,{className:"flex-1 h-[calc(100vh-4rem)]",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 p-4",children:[e.jsx("p",{className:"text-lg mb-4",children:"존재하지 않는 계정입니다."}),e.jsx(x,{onClick:()=>c("/accounts"),children:"계정 목록으로 돌아가기"})]})})});const M=async a=>{if(!(!s||!r)){u(!0);try{const m={...s,name:a.name,positionMode:a.positionMode};await D(m)?(p.success("계정 정보가 업데이트되었습니다."),await w(),c("/accounts")):p.error("계정 정보 업데이트에 실패했습니다.")}catch(m){console.error("계정 업데이트 중 오류 발생:",m),p.error("계정 업데이트 중 오류가 발생했습니다.")}finally{u(!1)}}};return e.jsx(g,{headerProps:{title:"계정 편집"},children:e.jsx(N,{className:"flex-1 h-[calc(100vh-4rem)]",children:e.jsx("div",{className:"flex flex-col space-y-6 p-4 pb-20",children:t?e.jsx("div",{className:"flex justify-center items-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"거래소"}),e.jsx("p",{className:"text-lg font-medium capitalize",children:s==null?void 0:s.exchange})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"잔액"}),e.jsxs("p",{className:"text-lg font-medium",children:[A(((j=(h=d==null?void 0:d.balance)==null?void 0:h.usd)==null?void 0:j.total)||0)," USD"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"생성일"}),e.jsx("p",{className:"text-lg font-medium",children:new Date((s==null?void 0:s.createdAt)||0).toLocaleDateString()})]})]})})}),e.jsx(L,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(M),className:"space-y-6",children:[e.jsxs("div",{className:"grid w-full items-center gap-4",children:[e.jsx("div",{className:"flex flex-col space-y-1.5",children:e.jsx(v,{control:l.control,name:"name",render:({field:a})=>e.jsxs(y,{children:[e.jsx(S,{htmlFor:"name",children:"계정 이름"}),e.jsx(V,{...a,id:"name",placeholder:"계정 이름"})]})})}),e.jsx("div",{className:"flex flex-col space-y-1.5",children:e.jsx(v,{control:l.control,name:"positionMode",render:({field:a})=>e.jsxs(y,{children:[e.jsx(S,{htmlFor:"positionMode",children:"포지션 모드"}),e.jsxs(P,{value:a.value,onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(k,{id:"positionMode",children:e.jsx(z,{placeholder:"포지션 모드 선택"})}),e.jsxs(U,{position:"popper",children:[e.jsx(b,{value:"oneway",children:"One-Way Mode"}),e.jsx(b,{value:"hedge",children:"Hedge Mode"})]})]})]})})})]}),e.jsxs("div",{className:"flex justify-center pt-6 w-full gap-4",children:[e.jsx(x,{className:"w-52",variant:"outline",onClick:()=>c("/accounts"),type:"button",disabled:o,children:"취소"}),e.jsx(x,{className:"w-52",type:"submit",disabled:o,children:o?"저장 중...":"저장"})]})]})})]})})})})};export{Z as default};
