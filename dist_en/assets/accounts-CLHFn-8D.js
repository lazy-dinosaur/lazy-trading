import{b as k,r as l,j as e,c as r,d as S,a as O,B as n,x as P,K as L,z as u}from"./index--mJaizsc.js";import{u as M}from"./use-CR7JZOh1.js";import{S as B}from"./screen-wrapper-ka0X-mpj.js";import{C as y,a as F}from"./card-BfKKBDHD.js";import{D as V,a as E,b as $,c as K,d as U,e as W}from"./dialog-Cmf3KlYu.js";import{P as g}from"./plus-BZGkxMGm.js";import{I as q}from"./info-CBKQO1mY.js";import"./arrow-left-CNAqUfmD.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=k("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=k("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),w=l.forwardRef(({className:a,...s},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:r("w-full caption-bottom text-sm",a),...s})}));w.displayName="Table";const T=l.forwardRef(({className:a,...s},t)=>e.jsx("thead",{ref:t,className:r("[&_tr]:border-b",a),...s}));T.displayName="TableHeader";const v=l.forwardRef(({className:a,...s},t)=>e.jsx("tbody",{ref:t,className:r("[&_tr:last-child]:border-0",a),...s}));v.displayName="TableBody";const Q=l.forwardRef(({className:a,...s},t)=>e.jsx("tfoot",{ref:t,className:r("border-t bg-zinc-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-zinc-800/50",a),...s}));Q.displayName="TableFooter";const j=l.forwardRef(({className:a,...s},t)=>e.jsx("tr",{ref:t,className:r("border-b transition-colors hover:bg-zinc-100/50 data-[state=selected]:bg-zinc-100 dark:hover:bg-zinc-800/50 dark:data-[state=selected]:bg-zinc-800",a),...s}));j.displayName="TableRow";const o=l.forwardRef(({className:a,...s},t)=>e.jsx("th",{ref:t,className:r("h-10 px-2 text-left align-middle font-medium text-zinc-500 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] dark:text-zinc-400",a),...s}));o.displayName="TableHead";const i=l.forwardRef(({className:a,...s},t)=>e.jsx("td",{ref:t,className:r("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s}));i.displayName="TableCell";const X=l.forwardRef(({className:a,...s},t)=>e.jsx("caption",{ref:t,className:r("mt-4 text-sm text-zinc-500 dark:text-zinc-400",a),...s}));X.displayName="TableCaption";const le=()=>{const{t:a}=S(),s=O(),{accounts:t,accountsBalance:m,refreshAccounts:C,isLoading:D}=M(),[z,d]=l.useState(!1),[f,b]=l.useState(null),R=c=>{b(c),d(!0)},_=async()=>{if(f)try{await L(f)?(u.success(a("account.account_deleted")),C()):u.error(a("common.error"))}catch(c){console.error("계정 삭제 중 오류 발생:",c),u.error(a("common.error"))}finally{d(!1),b(null)}};return e.jsxs(B,{headerProps:{title:a("common.accounts")},children:[e.jsxs("div",{className:"flex flex-col space-y-4 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:a("dashboard.account_list")}),e.jsxs(n,{onClick:()=>s("/account/add"),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),a("dashboard.add_account")]})]}),D?e.jsx("div",{className:"flex justify-center items-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):!t||Object.keys(t).length===0?e.jsx(y,{children:e.jsxs(F,{className:"flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("p",{className:"mb-4 text-muted-foreground",children:a("dashboard.no_accounts")}),e.jsxs(n,{onClick:()=>s("/account/add"),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),a("dashboard.add_account_button")]})]})}):e.jsx(y,{children:e.jsxs(w,{children:[e.jsx(T,{children:e.jsxs(j,{children:[e.jsx(o,{children:a("account.name")}),e.jsx(o,{children:a("account.exchange")}),e.jsx(o,{className:"text-right",children:a("account.balance")}),e.jsx(o,{className:"text-right",children:a("common.created_date")}),e.jsx(o,{className:"text-right",children:a("common.manage")})]})}),e.jsx(v,{children:Object.entries(t).map(([c,x])=>{var p,N;const h=m==null?void 0:m[c],A=((N=(p=h==null?void 0:h.balance)==null?void 0:p.usd)==null?void 0:N.total)||0,H=new Date(x.createdAt).toLocaleDateString();return e.jsxs(j,{children:[e.jsx(i,{className:"font-medium",children:x.name}),e.jsx(i,{className:"capitalize",children:x.exchange}),e.jsx(i,{className:"text-right",children:P(A)}),e.jsx(i,{className:"text-right",children:H}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(n,{variant:"outline",size:"icon",onClick:()=>s(`/account/edit/${c}`),children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(n,{variant:"outline",size:"icon",onClick:()=>R(c),children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx(n,{variant:"outline",size:"icon",onClick:()=>s(`/account/detail/${c}`),children:e.jsx(q,{className:"h-4 w-4"})})]})})]},c)})})]})})]}),e.jsx(V,{open:z,onOpenChange:d,children:e.jsxs(E,{children:[e.jsxs($,{children:[e.jsx(K,{children:a("account.delete_account")}),e.jsx(U,{children:a("account.confirm_delete")})]}),e.jsxs(W,{children:[e.jsx(n,{variant:"outline",onClick:()=>d(!1),children:a("common.cancel")}),e.jsx(n,{variant:"destructive",onClick:_,children:a("common.delete")})]})]})})]})};export{le as default};
